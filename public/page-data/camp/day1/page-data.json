{
    "componentChunkName": "component---src-templates-camp-curriculum-js",
    "path": "/camp/day1",
    "result": {"data":{"markdownRemark":{"html":"<h2>Introduction to Raspberry Pi</h2>\n<p>A Raspberry Pi is a simple, mini computer. It is a \"single-board computer\" because it is a single circuit board. On it, there is a microprocessor that computes logical and arithmetic operations (just like any computer). Then, there are also ports for you to plug in any I/O (input or out) devices.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a5eb4888202cbf6db66bc067995b8251/99072/day1_pi_parts.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACzElEQVQoz21T+09SYRg+/02/trW1ttpqTZtFmSOdlRfMTF2ohJpNESXQUE4zM1nqdG2pIxS8METZFKSyUSqECEqiXERuh4OOFM6Bc2nneElb7759+/bte973+d7neQHyJAiCJMlU7ACaNIQVuvCYnt7nqcOYPqTQITvQybPDAP6Cceo2/strvs5eYXCtmbUrt2ssGc8sjBrr3TrzpZLduUUKi+H/A9MJUgiS8IeREIyEo3FP4LdtC4GiiRAUcXl2ozBGEkfF6XUMJqh8m05lWye3ob2tUSLiSVp47cK6ViHY0yTXNo58mVEbZ71+H409Yg4QOI6jSQxBSYLsmOkfmpZXD4jP85iXBXkX+blXBHnXmvJLBGyX2wMHwoFQKGZ27H2z7K+50HAUgCYNpqvl5gyOI5cvHe4DVR9alFL90sLUoi6Lw2JWsTJ5JQ/r2bIJmWxGYXc74XGDs17q4HREtEYgtry+/Va+LR3defNpQqXMklZzh9sd62vG1WUmm5VTVnBHXJ5W86C1BzSZl0yWn9jePo6gZxpGfSKJKTRjWZ1PGd2V2V3VzC5Omqj4hujJveePb9UWNA2Dhs9z5g17wu7y9Y4HBqeRnTBAEASB4TgtAKgaTOcXsiQVF8R5514yb4KlVa952YLyHHGleADUzKrNG/YDk8Ml7Pd2yuKbvuPKdLdVC+9b+nm1fZKyvubiXn5pT2OVhP9uCCwEGeKRvs0tp8W+morG8AT6j84U8f34xi60afdsmeyWFYfNZLdMzWl182qHz6CfnV7QqgMuNy0rQTmKIIBD0aDxeYoMKIc130mCSPqgpB9OBWEsAMfdQRxKeF/0OIte+aXK0w6ldCZJ0tc9uprfbM1tgGd/xN1+W5HIer/R2yWPaI0WBteUXmF7JEwdJHA0edqPwJnBoO2No0k0CKNBGDtIxLd2AoPTwY+ayNTX0yNxCP4DUJGUFPSJrwQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"parts of a Raspberry Pi\"\n        title=\"parts of a Raspberry Pi\"\n        src=\"/static/a5eb4888202cbf6db66bc067995b8251/0a47e/day1_pi_parts.png\"\n        srcset=\"/static/a5eb4888202cbf6db66bc067995b8251/8a4e8/day1_pi_parts.png 150w,\n/static/a5eb4888202cbf6db66bc067995b8251/5a46d/day1_pi_parts.png 300w,\n/static/a5eb4888202cbf6db66bc067995b8251/0a47e/day1_pi_parts.png 600w,\n/static/a5eb4888202cbf6db66bc067995b8251/99072/day1_pi_parts.png 842w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Examples of input devices are the standard keyboard and mouse, or external sensors like a camera or microphone. Output devices are the ones transforming anything coming from the computer into a human-perceptible form. This can include a monitor (which visualizes the state of the computer), or a speaker (which provides auditory feedback).</p>\n<h3>GPIO</h3>\n<p>GPIO stands for \"general-purpose input/output\". This consists of two rows of pins along the side of the Raspberry Pi.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df7d7847c57a1ca6d5b2617695de6d46/497e9/day1_gpio_pinout.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACK0lEQVQoz3WRy08TURTG+b9MDBqjGxPjxveDBaIbSUyMsqK0WkAiEl2RSIwLF8SFYDHBGCGSaGqVFuq0wzDQoQ/a6XOmM3O59869c+8xU4hu9MtZnM0v3/m+0wf/kfC5ZByElCxcOKHCZ8AD4IFgTDAupewDAILNpJ5UDD1b0L6q38hBHSQIRLCHSsae7yBiu3Ozs0Vth3TdZr0BgQgwFdQP4cq+cnrqxqnJ23dfT47PTax8fAsAAaE108xsbKCOTazueDyu/8pZzZaqbVGfghCC9OD17Xz/1NDAq9H55PKF+PDiYgIA2AHhATcKBrYcYjlPxif0bM7t2OqWatbrgnFBWQin8uljEwODLyPzK0vHRy4nFt4BB46wkLJULFIXURfFxsb0nOrZTqPZDBvhwdHZqz+S1589ODs6eObWxf6HV98nlgCAY1KpVDLpDGpb1HbjsdhONtc2G8aeAQDyD/x9/dOlx0P996+dHLl5Yvjcl88Lh3C709E0rZfZeRSN6puK07byqooxBiGDw8zJ7bXzz+9cid8bno7MvHmRyq8dwoEIqtUqdj3qouhoRFdU7KFypXKAMQTiyDm7py8n1z6kVn8qG8Z+OW1shf9zvWqtpigKaofO0Uhke1OxGq2d3V3P8/4WRiipN8yaGY7dtQjFIMPCqO+XiiVsO7TrzjydNlQN2d1CwSiVyxRh6ffgf0hKQagkPvhcUhZg2m21GcJAmaRMEF9gKoX8De7pOH6vbt49AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GPIO pinout\"\n        title=\"GPIO pinout\"\n        src=\"/static/df7d7847c57a1ca6d5b2617695de6d46/0a47e/day1_gpio_pinout.png\"\n        srcset=\"/static/df7d7847c57a1ca6d5b2617695de6d46/8a4e8/day1_gpio_pinout.png 150w,\n/static/df7d7847c57a1ca6d5b2617695de6d46/5a46d/day1_gpio_pinout.png 300w,\n/static/df7d7847c57a1ca6d5b2617695de6d46/0a47e/day1_gpio_pinout.png 600w,\n/static/df7d7847c57a1ca6d5b2617695de6d46/1cfc2/day1_gpio_pinout.png 900w,\n/static/df7d7847c57a1ca6d5b2617695de6d46/c1b63/day1_gpio_pinout.png 1200w,\n/static/df7d7847c57a1ca6d5b2617695de6d46/497e9/day1_gpio_pinout.png 2064w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Each pin has different uses:</p>\n<h4>Standard GPIO Pins</h4>\n<p>These pins can be used for sending and receiving any input/output. Each pin has only 2 voltage states: high or low. Think of this as \"1 or 0\", or \"on or off\". You can send an \"on or off\" signal to the connected peripheral device. The device can also communicate back by sending the same signal or a series of signals.</p>\n<h4>Power Pins</h4>\n<p>These pins transmit power as output to power attached peripherals. There are several 3.3V and 5V output pins, depending on what the external device requires.</p>\n<h4>Ground</h4>\n<p>And if we’re going to be rigging up electrical circuits here with power, then we’ll need a ground.</p>\n<h4>Communication Pins</h4>\n<p>Some of the standard GPIO pins are used for communication purposes. Here are some common communication protocols.</p>\n<ul>\n<li>SPI pins – The Serial Peripheral Interface (SPI) is a communication protocol used to transfer data between micro-computers like the Raspberry Pi and peripheral devices. The MISO pin receives data, and the MOSI pin sends data from the Raspberry Pi. Furthermore, the serial clock pin sends pulses at a regular frequency between the Raspberry Pi and the SPI device at the same speed, in which the devices transfer data to each other.</li>\n<li>UART pins – UART stands for \"universal asynchronous receiver-transmitter\", which is a physical circuit designed to send and receive data.</li>\n<li>PWM pins – PWM stands for “pulse width modulation,” which is a communication protocol best used with stuff that moves and lights up: motors, LEDs, etc.</li>\n<li>I2C pins – I2C stands for \"inter-integrated circuit\" (two “inters” or I \"squared\" C). It works similarly to SPI, but it doesn’t force you to use nearly so many pins.</li>\n</ul>\n<h2>Introduction to the Project</h2>\n<p>Over the course of the next few days, you will complete a project that replicates a smart doorbell system.</p>\n<p>Imagine you want to create a doorbell alarm system in which the visitor doesn't have to press a button for you to be notified. The doorbell system will know when a person approaches the door and alert you.</p>\n<p>We will achieve this through several parts. Today, you will begin by learning about how to interface with the camera module using a Python script.</p>\n<h2>1. Take a picture</h2>\n<p>To take a picture, we will use the built-in library <code class=\"language-text\">libcamera</code>. It is a software library aimed at supporting complex camera systems directly from the Linux operating system.</p>\n<p>Let's check to make sure that everything works. Run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ libcamera-hello</code></pre></div>\n<p>in the terminal. You should see a camera preview window for about 5 seconds.</p>\n<p>To set how many seconds the preview window will be shown, add a tag <code class=\"language-text\">-t &lt;duration></code> to specify the number of milliseconds. We can also show the preview indefinitely by running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ libcamera-hello -t <span class=\"token number\">0</span></code></pre></div>\n<p>To exit the preview, click the window's close button, or use <code class=\"language-text\">Ctrl-C</code> in the terminal.</p>\n<p>Now, let's capture a photo. To accomplish this, we will use the built-in <code class=\"language-text\">libcamera-still</code> application.</p>\n<p>To capture a full resolution JPEG images, run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ libcamera-still -o test.jpg</code></pre></div>\n<p>This will display a preview for about 5 seconds, and then capture a full resolution JPEG image to the file <code class=\"language-text\">test.jpg</code>.</p>\n<p>The <code class=\"language-text\">-t &lt;duration></code> option can be used to alter the length of time the preview shows, and the <code class=\"language-text\">--width</code> and <code class=\"language-text\">--height</code> options will change the resolution of the captured still image. For example</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ libcamera-still -o test.jpg -t <span class=\"token number\">2000</span> --width <span class=\"token number\">640</span> --height <span class=\"token number\">480</span></code></pre></div>\n<p><code class=\"language-text\">libcamera-still</code> allows files to be saved in a number of different formats:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ libcamera-still -e png -o test.png\n$ libcamera-still -e bmp -o test.bmp\n$ libcamera-still -e rgb -o test.data\n$ libcamera-still -e yuv420 -o test.data</code></pre></div>\n<p>Note that the format in which the image is saved depends on the <code class=\"language-text\">-e</code> (equivalently <code class=\"language-text\">--encoding</code>) option and is not selected automatically based on the output file name.</p>\n<h2>2. Automate Picture Taking</h2>\n<p>Now, we know that we can use the built-in <code class=\"language-text\">libcamera-still</code> application to take images, let's wrap it up in a Bash script.</p>\n<p>A Bash script is a file that contains a series of shell commands. Anything you can run normally on the command line can be put into a Bash script and it does exactly the same thing. Similarly, anything you can put into a Bash script can also be run normally in the command line and do exactly the same thing.</p>\n<p>Bash script helps us automate tasks by allowing us to run a set of terminal commands all at once.</p>\n<p>To start, let's create a <code class=\"language-text\">capture.sh</code> file in your final project folder on the <code class=\"language-text\">Desktop</code>. This will be the Bash script where we will automate taking images. Once created, it is important to note that the first line of the script must be</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span></code></pre></div>\n<p>in order to signify that this is in fact a Bash script. The hash exclamation mark <code class=\"language-text\">(#!)</code> character sequence is referred to as the \"Shebang\". Following it is the path to the interpreter (or program) that should be used to run (or interpret) the rest of the lines in the text file. For a Bash script, it will be the path to Bash (the common interpreter of shell commands), but there are many other types of scripts and each of them has its own interpreter.</p>\n<p>In a Bash script, we can run any terminal commands we want! For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token builtin class-name\">echo</span> Hello\n<span class=\"token function\">sleep</span> <span class=\"token number\">1</span>\n<span class=\"token builtin class-name\">echo</span> World\n<span class=\"token function\">sleep</span> <span class=\"token number\">1</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">!</span></code></pre></div>\n<p>And this will print (run ./capture.sh in terminal)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Hello\nWorld\n<span class=\"token operator\">!</span></code></pre></div>\n<p>into the terminal with 1 second between each print out statement.\n(If encounter permission denied, run \"ls -la\" to check privilege and use \"chmod u+x capture.sh\" to give privilege.)</p>\n<p>For our purpose, we will create a script called <code class=\"language-text\">capture.sh</code> with the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\nlibcamera-still -o test.jpg</code></pre></div>\n<p>Can you guess what this script will do?</p>\n<p>You'd be correct if you said that it would do the exact same thing as running the <code class=\"language-text\">libcamera-still -o test.jpg</code> command directly in the terminal!</p>\n<p>Now, to execute this script, we can go back to the terminal and run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./capture.sh</code></pre></div>\n<p>You'll notice that a new <code class=\"language-text\">test.jpg</code> file was created in your final project folder. It's the image just captured! Try running the command again. You'll see that <code class=\"language-text\">test.jpg</code> is replaced with a new image. Let's fix this.</p>\n<p>Inside <code class=\"language-text\">capture.sh</code>, replacing the existing line with</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">libcamera-still -o <span class=\"token variable\">$1</span>.jpg</code></pre></div>\n<p>instead. Instead of storing the image in the file <code class=\"language-text\">test.jpg</code>, we've replaced it with <code class=\"language-text\">$1.jpg</code>. What does this mean?</p>\n<p><code class=\"language-text\">$1</code> is the first command-line argument passed to the shell script. Go back to the terminal and run the following</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./capture.sh image1.jpg</code></pre></div>\n<p>Now, the new image is stored in <code class=\"language-text\">image1.jpg</code>. Run it again but replace <code class=\"language-text\">image1.jpg</code> with anything (ending in <code class=\"language-text\">.jpg</code>). As you can see, our Bash script reads in whatever is passed to it when you run the script and uses that as the name of the file. Very cool stuff! Now you can run our <code class=\"language-text\">./capture.sh</code> script and store the image to any filename of your choosing.</p>\n<h2>3. To Push Some Buttons</h2>\n<p>Now you may think about using your new Raspberry Pi camera on the go, or showing it off at your friend's party, but you certainly don't want to carry a heavy keyboard and monitor with you. How will we take pictures then?</p>\n<p>This is where we will take what we've learned about GPIO pins and put them to good use.</p>\n<p>Let's write a Python script that takes a photo using the camera module whenever a push button is pressed.</p>\n<h3>a) Hardware Setup</h3>\n<p>We will use a breadboard, a push pin (or a switch), a resistor, and two jumper wires.</p>\n<p>We connect one side of the switch to an input pin on the Raspberry Pi, in this case, we use pin 10. On the other side of the switch we connect to 3.3V on pin 1 using a resistor. The resistor is used as a current limiting resistor to protect our input pin by limiting the amount of current that can flow.</p>\n<p>It should look like the following:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/69fc11cddc180804410dffdb85aa2cad/84ae3/day1_pushbutton_circuit.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAMEBQEG/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHS7DSzn0DJVJSIsiv/xAAcEAABBAMBAAAAAAAAAAAAAAABAAIDBBARFBP/2gAIAQEAAQUCzZf5LrKbacRaifKuV2hCdf/EABcRAAMBAAAAAAAAAAAAAAAAAAABERL/2gAIAQMBAT8B0imUyH//xAAXEQEBAQEAAAAAAAAAAAAAAAAAEQES/9oACAECAQE/AbiuUf/EABsQAAEEAwAAAAAAAAAAAAAAAAABAhExEBKR/9oACAEBAAY/AspCWTq2Ck4JrindP//EAB0QAQABBAMBAAAAAAAAAAAAAAEAESExYRBBcdH/2gAIAQEAAT8hXUM8VdKgusPsEArc2lsxDqBIDzEMTFrP/9oADAMBAAIAAwAAABDM3z3/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QQcWCyzWCX//EABcRAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQIBAT8QS7ZkLrYv/8QAIBABAAICAAcBAAAAAAAAAAAAAREhADEQQVFxgZGxwf/aAAgBAQABPxBjUnpmjucuDyuElr05WlBtIfuSfImoPuKQJZTCuQgVgci7kb1jrNEJR4vWf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Push Button Circuit\"\n        title=\"Push Button Circuit\"\n        src=\"/static/69fc11cddc180804410dffdb85aa2cad/b4294/day1_pushbutton_circuit.jpg\"\n        srcset=\"/static/69fc11cddc180804410dffdb85aa2cad/75985/day1_pushbutton_circuit.jpg 150w,\n/static/69fc11cddc180804410dffdb85aa2cad/f93b5/day1_pushbutton_circuit.jpg 300w,\n/static/69fc11cddc180804410dffdb85aa2cad/b4294/day1_pushbutton_circuit.jpg 600w,\n/static/69fc11cddc180804410dffdb85aa2cad/8e1fc/day1_pushbutton_circuit.jpg 900w,\n/static/69fc11cddc180804410dffdb85aa2cad/84ae3/day1_pushbutton_circuit.jpg 1116w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>The idea is that the input pin will be low (0V) when the button is not pushed. When the button is pushed it will connect the pin to 3.3V and change the state to high (3.3V).</p>\n<p>In the diagram above, pin 10 is used. Notice how the physical pin 10 is the 5th pin from the edge along the first row of pins. You can use any available GPIO pin on the board, it does not have to be pin 10 specifically.</p>\n<h3>b) Python Script to read GPIO Input</h3>\n<p>We will need to use the <code class=\"language-text\">RPi.GPIO</code> module. This package provides a Python module to control the GPIO on a Raspberry Pi. But first, we must download the package locally by running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pip3 <span class=\"token function\">install</span> RPi.GPIO</code></pre></div>\n<p>in the terminal.</p>\n<p>Now, create a Python file, let's call it <code class=\"language-text\">push_botton_capture.py</code>.</p>\n<p>Our initial script will initialize the GPIO port and then continuously read the status of the pin until we exit the program.</p>\n<p>First we import the GPIO library and then setup the library to use board numbering. We then initialize pin 10 as an input pin, and instruct the Raspberry Pi to pull the pin low by using the <code class=\"language-text\">pull_up_down</code> parameters.</p>\n<p>The initialization codes are like the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber 0\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> RPi<span class=\"token punctuation\">.</span>GPIO <span class=\"token keyword\">as</span> GPIO\nGPIO<span class=\"token punctuation\">.</span>setwarnings<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Ignore warning for now</span>\nGPIO<span class=\"token punctuation\">.</span>setmode<span class=\"token punctuation\">(</span>GPIO<span class=\"token punctuation\">.</span>BOARD<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Use physical pin numbering</span>\nGPIO<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">,</span> pull_up_down<span class=\"token operator\">=</span>GPIO<span class=\"token punctuation\">.</span>PUD_DOWN<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Set pin 10 to be an input pin and set initial value to be pulled low (off)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">pull_up_down</code> parameter in the <code class=\"language-text\">GPIO.setup</code> call tells the Raspberry Pi which state the pin should be in when there is nothing connected to the pin. This is important since we want our program to read a low state when the button is not pushed and a high state when the button is pushed.</p>\n<p>With the port being initialized, we can write the codes that continuously read the port and output a message when the button is pressed. We use the GPIO.input function to read in the state of the port.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># Run forever</span>\n    <span class=\"token keyword\">if</span> GPIO<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> GPIO<span class=\"token punctuation\">.</span>HIGH<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Button was pushed!\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Let's open your final project folder in the terminal and try executing this Python program by running the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python3 push_botton_capture.py</code></pre></div>\n<p>You’ll notice that when you push the button, the script outputs <code class=\"language-text\">Button was pushed!</code> many times. This is because we are continuously reading in the state of the button.</p>\n<p>If the program does not work, or continuously outputs <code class=\"language-text\">Button was pushed!</code> without the button being pressed down, try rotating the button by 90 degrees.</p>\n<h3>c) Switching to Event-based GPIO Input</h3>\n<p>We want the program to only prints out <code class=\"language-text\">Button was pushed!</code> once every time the button is pushed. After all, it is quite strange for there to be multiple <code class=\"language-text\">Button was pushed!</code> printed when you have only pressed the button once. This is a result of 'switch bounce'.</p>\n<p>We want to rewrite our program to print a single message whenever the button is pressed rather than continuously outputting a message. We can realize this by using GPIO events.</p>\n<p>A GPIO event in the Raspberry Pi Python GPIO library works by calling a Python function whenever an event is triggered. Such a function is called a callback function. A GPIO event also has built-in functionality for \"switch bounce\" handling, which will solve our problem!</p>\n<p>An event can be an input pin being low or high, but it could also be when the pin changes from low to high – called rising, or when the pin changes from high to low – called falling.</p>\n<p>In our case we want to detect whenever the button is being pressed, which is going from low to high, and is also called the rising edge.</p>\n<p>Before we setup the event we must, however, first write the callback function to be executed when the event is detected. The callback function is a regular Python function and as such can contain any Python code, it could send out a tweet or, as what we did in our case, simply print <code class=\"language-text\">Button was pushed!</code>.</p>\n<p>On the top of <code class=\"language-text\">push_botton_capture.py</code>, let's add</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">button_callback</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Button was pushed!\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Next, we will initialize the pin</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber 0\" class=\"language-python line-numbers\"><code class=\"language-python\">GPIO<span class=\"token punctuation\">.</span>setwarnings<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Ignore warning for now</span>\nGPIO<span class=\"token punctuation\">.</span>setmode<span class=\"token punctuation\">(</span>GPIO<span class=\"token punctuation\">.</span>BOARD<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Use physical pin numbering</span>\nGPIO<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">,</span> pull_up_down<span class=\"token operator\">=</span>GPIO<span class=\"token punctuation\">.</span>PUD_DOWN<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Set pin 10 to be an input pin and set initial value to be pulled low (off)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Finally, let's define the wanted behavior when a specific event occurs. Note the first parameter defines the channel or pin we're monitoring. The second specifies the rising or falling edge. We use <code class=\"language-text\">callback</code> parameter to register the callback function and <code class=\"language-text\">bounce time</code> for switch bound handling.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">GPIO<span class=\"token punctuation\">.</span>add_event_detect<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>GPIO<span class=\"token punctuation\">.</span>RISING<span class=\"token punctuation\">,</span>callback<span class=\"token operator\">=</span>button_callback<span class=\"token punctuation\">,</span>bouncetime<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Setup event on pin 10 rising edge, ignoring further edges for 200ms</span></code></pre></div>\n<p>Lastly, we should instruct Python to wait for keyboard input and when someone presses enter cleanup the GPIO input library resources and finish the program.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">message <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Press enter to quit\\n\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Run until someone presses enter</span>\nGPIO<span class=\"token punctuation\">.</span>cleanup<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Clean up</span></code></pre></div>\n<p>In summary, your <code class=\"language-text\">push_button_capture.py</code> should now look like the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber 0\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> RPi<span class=\"token punctuation\">.</span>GPIO <span class=\"token keyword\">as</span> GPIO <span class=\"token comment\"># Import Raspberry Pi GPIO library</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">button_callback</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Button was pushed!\"</span><span class=\"token punctuation\">)</span>\nGPIO<span class=\"token punctuation\">.</span>setwarnings<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Ignore warning for now</span>\nGPIO<span class=\"token punctuation\">.</span>setmode<span class=\"token punctuation\">(</span>GPIO<span class=\"token punctuation\">.</span>BOARD<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Use physical pin numbering</span>\nGPIO<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">,</span> pull_up_down<span class=\"token operator\">=</span>GPIO<span class=\"token punctuation\">.</span>PUD_DOWN<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Set pin 10 to be an input pin and set initial value to be pulled low (off)</span>\nGPIO<span class=\"token punctuation\">.</span>add_event_detect<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>GPIO<span class=\"token punctuation\">.</span>RISING<span class=\"token punctuation\">,</span>callback<span class=\"token operator\">=</span>button_callback<span class=\"token punctuation\">,</span>bouncetime<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Setup event on pin 10 rising edge, ignoring further edges for 200ms</span>\nmessage <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Press enter to quit\\n\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Run until someone presses enter</span>\nGPIO<span class=\"token punctuation\">.</span>cleanup<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Clean up</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Let's try executing this file again by running the following in the terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python3 push_button_capture.py</code></pre></div>\n<p>You now could see that the program only prints out <code class=\"language-text\">Button was pushed!</code> only once every time the button is pushed.</p>\n<h3>d) What To Do When the Button is Pushed?</h3>\n<p>There is now a visual indication in the terminal whenever the button is pushed. Our next task is to capture an image whenever the event occurs. Can you think of how this can be accomplished?</p>\n<p>We've already had a callback function, <code class=\"language-text\">button_callback</code>, which is called whenever the button is pushed. Hard to believe? Change the print statement inside <code class=\"language-text\">button_callback</code> to anything you want and run the program again. You'll see that whenever the button is pushed, your new print statement is printed in the terminal!</p>\n<p>So, we will need to add something inside of this callback function in order to accomplish our mission.</p>\n<p>We've already written a Bash script that takes a photo. Let's use that! When we wanted to take a photo, we can simply run the Bash script in the terminal. We need a way to run the same script in our Python program.</p>\n<p>This is where the Python <code class=\"language-text\">os</code> module comes into place. This module provides a portable way of using operating system dependent functionality. Some popular functions include creating and deleting directories/files, and of course, executing other programs.</p>\n<p>To do this, we will first need to import the module in our Python file</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os</code></pre></div>\n<p>In order to run a terminal command in Python, we will use the functions <code class=\"language-text\">os.system</code>, meaning that we can add the following line in <code class=\"language-text\">button_callback</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">os<span class=\"token punctuation\">.</span>system<span class=\"token punctuation\">(</span><span class=\"token string\">\"./capture.sh test_capture.jpg\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Try running the Python program again. As you can see, whenever you press the button, <code class=\"language-text\">test_capture.jpg</code> is created with the photo. But we still face the same issue as before... If you press the button again, the photo is replaced with a new photo. What if we wanted to save all of the photos every time we press the button instead of just the most recent?</p>\n<h3>e) Unique Files for Each Image</h3>\n<p>We can try naming the images with something unique. Let's try using the timestamp for this purpose!</p>\n<p>To do this, let's import the <code class=\"language-text\">datetime</code> package in Python.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> datetime</code></pre></div>\n<p>To get the current time, we can use the built-in function <code class=\"language-text\">datetime.datetime.now</code>. We will then format the timestamp into something human-readable. To do this, we will use <code class=\"language-text\">strftime</code> to format the <code class=\"language-text\">datetime</code> object.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">current_time <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ntime_formatted <span class=\"token operator\">=</span> current_time<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%m_%d_%Y--%H_%M_%S\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Can you find a way to use the timestamp in your existing codes?</p>\n<p>We can replace the <code class=\"language-text\">os.system</code> call with the following. (Be aware there is a space \" \" after \"./capture.sh\" !)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">os<span class=\"token punctuation\">.</span>system<span class=\"token punctuation\">(</span><span class=\"token string\">\"./capture.sh \"</span> <span class=\"token operator\">+</span> time_formatted<span class=\"token punctuation\">)</span></code></pre></div>\n<p>This line uses string concatenation, which basically just adds different strings together to form a longer string. For example, if the <code class=\"language-text\">time_formatted</code> was <code class=\"language-text\">6_20_2022--10_03_02</code>, then Python would interpret the above line as</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">os<span class=\"token punctuation\">.</span>system<span class=\"token punctuation\">(</span><span class=\"token string\">\"./capture.sh 6_20_2022--10_03_02.jpg\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>f) Putting It All Together</h3>\n<p>The final version of <code class=\"language-text\">push_button_capture.py</code> should be the following.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber 0\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> RPi<span class=\"token punctuation\">.</span>GPIO <span class=\"token keyword\">as</span> GPIO <span class=\"token comment\"># Import Raspberry Pi GPIO library</span>\n<span class=\"token keyword\">import</span> datetime\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">button_callback</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Button was pushed!\"</span><span class=\"token punctuation\">)</span>\n    current_time <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    time_formatted <span class=\"token operator\">=</span> current_time<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%m_%d_%Y--%H_%M_%S\"</span><span class=\"token punctuation\">)</span>\n    os<span class=\"token punctuation\">.</span>system<span class=\"token punctuation\">(</span><span class=\"token string\">\"./capture2.sh \"</span> <span class=\"token operator\">+</span> time_formatted <span class=\"token operator\">+</span> <span class=\"token string\">\".jpg\"</span><span class=\"token punctuation\">)</span>\n\nGPIO<span class=\"token punctuation\">.</span>setwarnings<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Ignore warning for now</span>\nGPIO<span class=\"token punctuation\">.</span>setmode<span class=\"token punctuation\">(</span>GPIO<span class=\"token punctuation\">.</span>BOARD<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Use physical pin numbering</span>\nGPIO<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">,</span> pull_up_down<span class=\"token operator\">=</span>GPIO<span class=\"token punctuation\">.</span>PUD_DOWN<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Set pin 10 to be an input pin and set initial value to be pulled low (off)</span>\nGPIO<span class=\"token punctuation\">.</span>add_event_detect<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>GPIO<span class=\"token punctuation\">.</span>RISING<span class=\"token punctuation\">,</span>callback<span class=\"token operator\">=</span>button_callback<span class=\"token punctuation\">,</span>bouncetime<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Setup event on pin 10 rising edge, ignoring further edges for 200ms</span>\nmessage <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Press enter to quit\\n\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Run until someone presses enter</span>\nGPIO<span class=\"token punctuation\">.</span>cleanup<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Clean up</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Try running this in the terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python3 push_button_capture.py</code></pre></div>\n<p>We now can see that a new <code class=\"language-text\">.jpg</code> file is created every time you push the button. And each of the files is an image captured by the camera module.</p>","frontmatter":{"date":"June 20, 2022","slug":"/camp/day1","title":"Day 1"}}},"pageContext":{"slug":"/camp/day1"}},
    "staticQueryHashes": []}